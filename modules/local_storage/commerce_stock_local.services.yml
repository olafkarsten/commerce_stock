services:
  commerce_stock.local_stock_service:
    class: Drupal\commerce_stock_local\LocalStockService
    arguments: ['@commerce_stock.local_stock_checker', '@commerce_stock.local_stock_updater', '@commerce_stock.local_stock_service_config']
    tags:
      - { name: commerce_stock.stock_service, priority: 0 }

  commerce_stock.local_stock_checker:
    class: Drupal\commerce_stock_local\LocalStockChecker
    arguments: ['@database', '@entity_type.manager']

  commerce_stock.local_stock_updater:
    class: Drupal\commerce_stock_local\LocalStockUpdater
    arguments: ['@database', '@commerce_stock.local_stock_checker']

  commerce_stock.local_stock_service_config:
    class: Drupal\commerce_stock_local\LocalStockServiceConfig
    arguments: ['@entity_type.manager']

  commerce_stock_local_uninstall_validator:
      class: Drupal\commerce_stock_local\LocalStockUninstallValidator
      tags:
        - { name: module_install.uninstall_validator }
      arguments: ['@entity_type.manager', '@string_translation']

  commerce_stock_local.availability_location_resolver:
    class: Drupal\commerce_stock_local\Resolver\LocalStockAvailabilityLocationResolver
    tags:
      - {name: commerce_stock.availability_location_resolver, priority: -100 }
    arguments: ['@entity_type.manager']

  commerce_stock_local.transaction_location_resolver:
    class: Drupal\commerce_stock_local\Resolver\LocalStockTransactionLocationResolver
    tags:
      - { name: commerce_stock.transaction_location_resolver, priority: -100 }
    arguments: ['@entity_type.manager', '@commerce_stock.chain_availability_location_resolver']
